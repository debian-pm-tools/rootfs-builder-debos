architecture: {{ .architecture }}

actions:
  - action: apt
    packages:
      - qtwayland5 # Why isn't this installed as a dependency?
      - simplelogin
      - kwin-wayland
      - plasma-phone-components
      - kwin-wayland-backend-{{ .gfx }}
      - plasma-phone-settings
      - plasma-settings
      - kinfocenter
      - plasma-discover
      - qtvirtualkeyboard-plugin
      - plasma-nm
      - telegram-desktop
      - qml-module-ofono
      - telepathy-ofono-ril-mc-plugin
      - pulseaudio-utils
      - koko
      - kaidan
      - plasma-angelfish
      - glosbit
      - llsvplayer
      - vvave
      - pix
      - qmlkonsole
      - index
      - dbus-x11
      - upower
      - kaccounts-mobile
      - polkit-kde-agent-1
      - qtvirtualkeyboard-plugin
      - gpodder-qml
      - okular-mobile
      - kdeconnect-mobile
      - plasma-workspace-wallpapers
      - marble-maps
      - spacebar
      - kde-config-mobile-networking
      - gstreamer1.0-plugins-bad
      - gstreamer1.0-libav
      - gstreamer1.0-omx
      - nemo-qtmultimedia-plugins
      - qtvirtualkeyboard-gtk
      - qmlplane

  - action: run
    description: Set up user account
    chroot: true
    script: ../scripts/setup-user.sh

  - action: run
    description: Set environment variables for Plasma
    chroot: true
    script: ../scripts/setup-plasma-env.sh

  - action: run
    description: Set graphical target as default
    chroot: true
    script: ../scripts/set-graphical-target.sh
